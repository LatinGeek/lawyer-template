"use strict";(self.webpackChunkendless=self.webpackChunkendless||[]).push([[379],{11379:(D,g,c)=>{c.r(g),c.d(g,{ContactModule:()=>x});var u=c(69808),l=c(46146),o=c(93075),e=c(5e3),_=c(51995);let m=(()=>{class n{constructor(r){this.db=r}createUser(r,t){return this.db.collection("usersContact").add({age:parseInt(r.age),mobile:parseInt(r.mobile),name:r.name,surname:r.surname,avatar:t||"assets/images/user/user.png",nameToSearch:r.name.toLowerCase()})}updateUser(r,t){return t.nameToSearch=t.name.toLowerCase(),this.db.collection("usersContact").doc(r).set(t)}searchUsers(r){return this.db.collection("usersContact",t=>t.where("nameToSearch",">=",r).where("nameToSearch","<=",r+"\uf8ff")).snapshotChanges()}searchUsersByAge(r){return this.db.collection("usersContact",t=>t.orderBy("age").startAt(r)).snapshotChanges()}getUser(r){return this.db.collection("usersContact").doc(r).snapshotChanges()}getUsers(){return this.db.collection("usersContact").snapshotChanges()}deleteUser(r){return this.db.collection("usersContact").doc(r).delete()}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(_.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=c(22290);function v(n,i){1&n&&(e.TgZ(0,"div",26),e._uU(1," name is required "),e.qZA())}function b(n,i){1&n&&(e.TgZ(0,"div",26),e._uU(1," Invalid name "),e.qZA())}function C(n,i){1&n&&(e.TgZ(0,"div",26),e._uU(1," surname is required "),e.qZA())}function U(n,i){1&n&&(e.TgZ(0,"div",26),e._uU(1," mobile is required "),e.qZA())}function Z(n,i){1&n&&(e.TgZ(0,"div",26),e._uU(1," age is required "),e.qZA())}let T=(()=>{class n{constructor(r,t,a,s){this.fb=r,this.router=t,this.contactService=a,this.toastr=s,this.formErrors={name:"",surname:"",mobile:"",profileImg:"",age:""},this.contactForm=new o.cw({name:new o.NI,surname:new o.NI,mobile:new o.NI,age:new o.NI})}resetFields(){this.contactForm=this.fb.group({name:new o.NI("",o.kI.required),surname:new o.NI("",o.kI.required),mobile:new o.NI("",o.kI.required),age:new o.NI("",o.kI.required)})}showSuccess(){this.toastr.success("User Created!")}submit(r){this.contactService.createUser(r,this.url).then(t=>{this.resetFields(),this.router.navigate(["/contact/contacts"]),this.showSuccess()})}readUrl(r){if(0!==r.target.files.length&&null!=r.target.files[0].type.match(/image\/*/)){var a=new FileReader;a.readAsDataURL(r.target.files[0]),a.onload=s=>{this.url=a.result}}}cancel(){this.router.navigate(["/contact/contacts"])}ngOnInit(){}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(o.qu),e.Y36(l.F0),e.Y36(m),e.Y36(p._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-user"]],decls:41,vars:10,consts:[[1,"container-fluid"],[1,""],[1,"authentication-box","contact-profile-form"],[1,"text-center"],["src","assets/images/endless-logo.png","alt",""],[1,"card","mt-4"],[1,"card-body"],[1,"text-center","user-profile"],[1,"hovercard"],[1,"contact-profile"],["alt","",1,"rounded-circle","img-100",3,"src"],[1,"icon-wrapper"],[1,"icofont","icofont-pencil-alt-5"],["type","file",1,"upload",3,"change"],[1,"theme-form",3,"formGroup"],[1,"form-group"],[1,"col-form-label","pt-0"],["formControlName","name","type","text","required","",1,"form-control"],["class","text text-danger mt-1",4,"ngIf"],[1,"col-form-label"],["type","text","formControlName","surname","required","",1,"form-control"],["type","number","formControlName","mobile","required","",1,"form-control"],["type","number","formControlName","age","required","",1,"form-control"],[1,"form-group","row","mt-3","mb-0"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled","click"],["type","button","data-original-title","btn btn-info-gradien","title","",1,"btn","btn-primary",3,"click"],[1,"text","text-danger","mt-1"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"img",10),e.TgZ(11,"div",11)(12,"i",12)(13,"input",13),e.NdJ("change",function(s){return t.readUrl(s)}),e.qZA()()()()()(),e.TgZ(14,"form",14)(15,"div",15)(16,"label",16),e._uU(17,"Name"),e.qZA(),e._UZ(18,"input",17),e.YNc(19,v,2,0,"div",18),e.YNc(20,b,2,0,"div",18),e.qZA(),e.TgZ(21,"div",15)(22,"label",19),e._uU(23,"Surname"),e.qZA(),e._UZ(24,"input",20),e.YNc(25,C,2,0,"div",18),e.qZA(),e.TgZ(26,"div",15)(27,"label",19),e._uU(28,"Mobile"),e.qZA(),e._UZ(29,"input",21),e.YNc(30,U,2,0,"div",18),e.qZA(),e.TgZ(31,"div",15)(32,"label",19),e._uU(33,"Age"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,Z,2,0,"div",18),e.qZA(),e.TgZ(36,"div",23)(37,"button",24),e.NdJ("click",function(){return t.submit(t.contactForm.value)}),e._uU(38," Submit "),e.qZA(),e.TgZ(39,"button",25),e.NdJ("click",function(){return t.cancel()}),e._uU(40," Cancel"),e.qZA()()()()()()()()),2&r&&(e.ekj("sidebaron",t.sidebaron),e.xp6(10),e.Q6J("src",t.url?t.url:"assets/images/user/user.png",e.LSH),e.xp6(4),e.Q6J("formGroup",t.contactForm),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.name.touched&&(null==t.contactForm.controls.name.errors?null:t.contactForm.controls.name.errors.required)),e.xp6(1),e.Q6J("ngIf",t.contactForm.controls.name.touched&&(null==t.contactForm.controls.name.errors?null:t.contactForm.controls.name.errors.name)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.surname.touched&&(null==t.contactForm.controls.surname.errors?null:t.contactForm.controls.surname.errors.required)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.mobile.touched&&(null==t.contactForm.controls.mobile.errors?null:t.contactForm.controls.mobile.errors.required)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.mobile.touched&&(null==t.contactForm.controls.mobile.errors?null:t.contactForm.controls.mobile.errors.required)),e.xp6(2),e.Q6J("disabled",!t.contactForm.valid))},dependencies:[u.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u],encapsulation:2}),n})();var h=c(18815);const q=function(n){return["/contact/edit-user",n]};function y(n,i){if(1&n){const r=e.EpF();e.TgZ(0,"tbody")(1,"tr")(2,"td"),e._UZ(3,"img",21),e.qZA(),e.TgZ(4,"td")(5,"h6"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"h6"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"h6"),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"h6"),e._uU(15),e.qZA()(),e.TgZ(16,"td")(17,"a",12),e._uU(18,"Edit"),e.qZA(),e.TgZ(19,"button",22),e.NdJ("click",function(){const s=e.CHM(r).$implicit,d=e.oxw();return e.KtG(d.delete(s.payload.doc.id))}),e._uU(20,"Delete"),e.qZA()()()()}if(2&n){const r=i.$implicit;e.xp6(3),e.s9C("src",r.payload.doc.data().avatar,e.LSH),e.xp6(3),e.Oqu(r.payload.doc.data().name),e.xp6(3),e.Oqu(r.payload.doc.data().surname),e.xp6(3),e.Oqu(r.payload.doc.data().mobile),e.xp6(3),e.Oqu(r.payload.doc.data().age),e.xp6(2),e.Q6J("routerLink",e.VKq(6,q,r.payload.doc.id))}}function F(n,i){1&n&&(e.TgZ(0,"div")(1,"div",23)(2,"div"),e._UZ(3,"img",24),e.TgZ(4,"p"),e._uU(5,"Sorry, We didn't find any results matching this search"),e.qZA()()()())}const A=function(){return{standalone:!0}},N=function(){return["/contact/new-user"]};let w=(()=>{class n{constructor(r,t,a){this.contactService=r,this.router=t,this.toastr=a,this.searchValue="",this.logText="",this.value=10,this.highValue=50,this.options={floor:0,ceil:100}}showDelete(){this.toastr.error("User Deleted !")}onUserChangeStart(r){this.logText+=`onUserChangeStart(${this.getChangeContextString(r)})\n`}onUserChange(r){this.logText+=`onUserChange(${this.getChangeContextString(r)})\n`}onUserChangeEnd(r){this.logText+=`onUserChangeEnd(${this.getChangeContextString(r)})\n`}getChangeContextString(r){this.min=r.value,this.age=r.value,this.rangeChange(this.age)}searchByName(){let r=this.searchValue.toLowerCase();this.contactService.searchUsers(r).subscribe(t=>{this.name_filtered_items=t,this.items=this.combineLists(t,this.age_filtered_items)})}rangeChange(r){this.contactService.searchUsersByAge(r).subscribe(t=>{this.age_filtered_items=t,this.items=this.combineLists(t,this.name_filtered_items)})}combineLists(r,t){let a=[];return r.filter(s=>t.filter(d=>{d.payload.doc.id==s.payload.doc.id&&a.push(d)})),a}delete(r){this.contactService.deleteUser(r).then(t=>{this.router.navigate(["/contact/contacts"]),this.showDelete()},t=>{})}getData(){this.contactService.getUsers().subscribe(r=>{this.items=r,this.age_filtered_items=r,this.name_filtered_items=r})}ngOnInit(){this.getData()}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(m),e.Y36(l.F0),e.Y36(p._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-contacts"]],decls:43,vars:13,consts:[[1,"container-fluid","product-wrapper"],[1,"product-grid"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-xl-6"],[1,"search-form","contact-search"],[1,"form-group","mb-0"],["type","text","placeholder","Search by name...",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup"],[1,"contact-filter"],[1,"mb-0","me-2"],[3,"value","options","valueChange","userChangeStart","userChange","userChangeEnd"],[1,"btn","btn-primary","me-2",3,"routerLink"],[1,"product-wrapper-grid",2,"opacity","1"],[1,"col-sm-12"],[1,"product-box","table-responsive","contact-table"],[1,"table"],[1,"mb-0"],["colspan","2"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","#",1,"img-60","rounded-circle",3,"src"],[1,"btn","btn-secondary",3,"click"],[1,"search-not-found","text-center"],["src","assets/images/search-not-found.png","alt","",1,"second-search"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"input",8),e.NdJ("ngModelChange",function(s){return t.searchValue=s})("keyup",function(){return t.searchByName()}),e.qZA()()()(),e.TgZ(9,"div",5)(10,"div",9)(11,"h5",10),e._uU(12,"Filter By Age"),e.qZA(),e.TgZ(13,"ng5-slider",11),e.NdJ("valueChange",function(s){return t.value=s})("userChangeStart",function(s){return t.onUserChangeStart(s)})("userChange",function(s){return t.onUserChange(s)})("userChangeEnd",function(s){return t.onUserChangeEnd(s)}),e.qZA(),e.TgZ(14,"button",12)(15,"i"),e._uU(16,"ADD"),e.qZA()()()()()()(),e.TgZ(17,"div",13)(18,"div",4)(19,"div",14)(20,"div",2)(21,"div",15)(22,"table",16)(23,"thead")(24,"tr")(25,"th")(26,"h5",17),e._uU(27,"Profile"),e.qZA()(),e.TgZ(28,"th")(29,"h5",17),e._uU(30,"Name"),e.qZA()(),e.TgZ(31,"th")(32,"h5",17),e._uU(33,"Surname"),e.qZA()(),e.TgZ(34,"th")(35,"h5",17),e._uU(36,"Mobile"),e.qZA()(),e.TgZ(37,"th",18)(38,"h5",17),e._uU(39,"Age"),e.qZA()()()(),e.YNc(40,y,21,8,"tbody",19),e.qZA()()()()()(),e.TgZ(41,"div",14),e.YNc(42,F,6,0,"div",20),e.qZA()()()),2&r&&(e.ekj("sidebaron",t.sidebaron),e.xp6(8),e.Q6J("ngModel",t.searchValue)("ngModelOptions",e.DdM(11,A)),e.xp6(5),e.Q6J("value",t.value)("options",t.options),e.xp6(1),e.Q6J("routerLink",e.DdM(12,N)),e.xp6(3),e.ekj("list-view",t.listView),e.xp6(23),e.Q6J("ngForOf",t.items),e.xp6(2),e.Q6J("ngIf",!(null!=t.items&&t.items.length)))},dependencies:[u.sg,u.O5,l.rH,l.yS,o._Y,o.Fj,o.JJ,o.JL,o.On,o.F,h.w5]}),n})();function S(n,i){1&n&&(e.TgZ(0,"div",28),e._uU(1," name is required "),e.qZA())}function J(n,i){1&n&&(e.TgZ(0,"div",28),e._uU(1," Invalid name --\x3e "),e.qZA())}function I(n,i){1&n&&(e.TgZ(0,"div",28),e._uU(1," surname is required "),e.qZA())}function k(n,i){1&n&&(e.TgZ(0,"div",28),e._uU(1," mobile is required "),e.qZA())}function Y(n,i){1&n&&(e.TgZ(0,"div",28),e._uU(1," age is required "),e.qZA())}let E=(()=>{class n{constructor(r,t,a,s,d){this.fb=r,this.route=t,this.router=a,this.contactService=s,this.toastr=d}createForm(){this.contactForm=this.fb.group({name:[this.item.name,o.kI.required],surname:[this.item.surname,o.kI.required],mobile:[this.item.mobile,o.kI.required],age:[this.item.age,o.kI.required]})}save(r){r.avatar=this.avatar,r.age=Number(r.age),this.contactService.updateUser(this.item.id,r).then(t=>{this.router.navigate(["/contact/contacts"]),this.showEdit()})}showEdit(){this.toastr.success("User Updated!")}readUrl(r){if(0!==r.target.files.length&&null!=r.target.files[0].type.match(/image\/*/)){var a=new FileReader;a.readAsDataURL(r.target.files[0]),a.onload=s=>{this.avatar=a.result}}}cancel(){this.router.navigate(["/contact/contacts"])}ngOnInit(){this.route.data.subscribe(r=>{let t=r.data;t&&(this.avatar=t.payload.data().avatar,this.item=t.payload.data(),this.item.id=t.payload.id,this.createForm())})}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(o.qu),e.Y36(l.gz),e.Y36(l.F0),e.Y36(m),e.Y36(p._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-user"]],decls:41,vars:10,consts:[[1,"container-fluid"],[1,""],[1,"authentication-box","contact-profile-form"],[1,"text-center"],["src","assets/images/endless-logo.png","alt",""],[1,"card","mt-4"],[1,"card-body"],[1,"text-center","user-profile"],[1,"hovercard"],[1,"contact-profile"],["alt","",1,"rounded-circle","img-100",3,"src"],[1,"icon-wrapper"],[1,"icofont","icofont-pencil-alt-5"],["type","file",1,"upload",3,"change"],[3,"formGroup"],[1,"form-group"],["for","name",1,"col-form-label","pt-0"],["type","text","formControlName","name",1,"form-control"],["class","text text-danger mt-1",4,"ngIf"],["for","surname",1,"col-form-label"],["type","text","formControlName","surname",1,"form-control"],["for","mobile",1,"col-form-label"],["type","number","formControlName","mobile",1,"form-control"],["for","age",1,"col-form-label"],["type","number","formControlName","age",1,"form-control"],[1,"form-group","row","mt-3","mb-0"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled","click"],["type","button","data-original-title","btn btn-info-gradien","title","",1,"btn","btn-primary",3,"click"],[1,"text","text-danger","mt-1"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"img",10),e.TgZ(11,"div",11)(12,"i",12)(13,"input",13),e.NdJ("change",function(s){return t.readUrl(s)}),e.qZA()()()()()(),e.TgZ(14,"form",14)(15,"div",15)(16,"label",16),e._uU(17,"Name"),e.qZA(),e._UZ(18,"input",17),e.YNc(19,S,2,0,"div",18),e.YNc(20,J,2,0,"div",18),e.qZA(),e.TgZ(21,"div",15)(22,"label",19),e._uU(23,"Surname"),e.qZA(),e._UZ(24,"input",20),e.YNc(25,I,2,0,"div",18),e.qZA(),e.TgZ(26,"div",15)(27,"label",21),e._uU(28,"Mobile"),e.qZA(),e._UZ(29,"input",22),e.YNc(30,k,2,0,"div",18),e.qZA(),e.TgZ(31,"div",15)(32,"label",23),e._uU(33,"Age"),e.qZA(),e._UZ(34,"input",24),e.YNc(35,Y,2,0,"div",18),e.qZA(),e.TgZ(36,"div",25)(37,"button",26),e.NdJ("click",function(){return t.save(t.contactForm.value)}),e._uU(38," Save "),e.qZA(),e.TgZ(39,"button",27),e.NdJ("click",function(){return t.cancel()}),e._uU(40," Cancel"),e.qZA()()()()()()()()),2&r&&(e.ekj("sidebaron",t.sidebaron),e.xp6(10),e.Q6J("src",t.avatar,e.LSH),e.xp6(4),e.Q6J("formGroup",t.contactForm),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.name.touched&&(null==t.contactForm.controls.name.errors?null:t.contactForm.controls.name.errors.required)),e.xp6(1),e.Q6J("ngIf",t.contactForm.controls.name.touched&&(null==t.contactForm.controls.name.errors?null:t.contactForm.controls.name.errors.name)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.surname.touched&&(null==t.contactForm.controls.surname.errors?null:t.contactForm.controls.surname.errors.required)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.mobile.touched&&(null==t.contactForm.controls.mobile.errors?null:t.contactForm.controls.mobile.errors.required)),e.xp6(5),e.Q6J("ngIf",t.contactForm.controls.mobile.touched&&(null==t.contactForm.controls.mobile.errors?null:t.contactForm.controls.mobile.errors.required)),e.xp6(2),e.Q6J("disabled",!t.contactForm.valid))},dependencies:[u.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u]}),n})(),f=(()=>{class n{constructor(r){this.contectService=r}resolve(r){return new Promise((t,a)=>{let s=r.paramMap.get("id");this.contectService.getUser(s).subscribe(d=>{t(d)})})}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(m))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const Q=[{path:"",children:[{path:"new-user",component:T,data:{title:"New User",breadcrumb:"New User"}},{path:"contacts",component:w,data:{title:"Contact",breadcrumb:"Contact"}},{path:"edit-user/:id",component:E,resolve:{data:f},data:{title:"Edit User",breadcrumb:"Edit User"}}]}];let M=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.Bz.forChild(Q),l.Bz]}),n})();var L=c(40520),O=c(43189);let x=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[m,f],imports:[u.ez,M,o.u5,o.UX,L.JF,h.bt,O.h,p.Rh.forRoot()]}),n})()}}]);